graph TD
    subgraph "Users"
        Customer("fa:fa-user Customer")
        Vendor("fa:fa-store Vendor")
        Rider("fa:fa-motorcycle Rider")
        Admin("fa:fa-user-shield Administrator")
    end

    subgraph "Client Applications"
        CustomerApp["fa:fa-mobile-alt Customer App (React Native)"]
        VendorApp["fa:fa-desktop Vendor Dashboard (Web)"]
        RiderApp["fa:fa-mobile-alt Rider App (React Native)"]
        AdminApp["fa:fa-desktop Admin Dashboard (Web)"]
    end

    subgraph "AWS Backend (ap-south-1)"
        direction LR
        APIGateway("fa:fa-server API Gateway")

        subgraph "Amazon EKS Cluster (Microservices)"
            IdentityService("fa:fa-id-card Identity & Access")
            OrderService("fa:fa-receipt Order Management")
            VendorService("fa:fa-warehouse Vendor & Catalog")
            RiderService("fa:fa-route Rider Logistics")
            PaymentService("fa:fa-money-bill-wave Payments & Settlements")
        end

        APIGateway --> IdentityService
        APIGateway --> OrderService
        APIGateway --> VendorService
        APIGateway --> RiderService
        APIGateway --> PaymentService
    end

    subgraph "External Services"
        Razorpay("fa:fa-credit-card Razorpay (Payments)")
        Mapbox("fa:fa-map-marked-alt Mapbox (Maps & Routing)")
        FCM_SNS("fa:fa-bell AWS SNS / FCM (Notifications)")
    end

    %% User to Client Interactions
    Customer --> CustomerApp
    Vendor --> VendorApp
    Rider --> RiderApp
    Admin --> AdminApp

    %% Client to Backend Interactions
    CustomerApp --> APIGateway
    VendorApp --> APIGateway
    RiderApp --> APIGateway
    AdminApp --> APIGateway

    %% Backend to External Service Interactions
    PaymentService --> Razorpay
    RiderService --> Mapbox
    OrderService --> Mapbox
    IdentityService --> FCM_SNS
    OrderService --> FCM_SNS

    %% Styling
    classDef user fill:#e3f2fd,stroke:#1976d2
    classDef client fill:#e8f5e9,stroke:#388e3c
    classDef external fill:#fff3e0,stroke:#f57c00
    classDef awscomp fill:#fce4ec,stroke:#d81b60

    class Customer,Vendor,Rider,Admin user
    class CustomerApp,VendorApp,RiderApp,AdminApp client
    class Razorpay,Mapbox,FCM_SNS external
    class APIGateway,IdentityService,OrderService,VendorService,RiderService,PaymentService awscomp